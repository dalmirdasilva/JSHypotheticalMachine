<div class="header">JS Hypothetical Machine (Neander Simulator with Extended Instruction Set)</div>
<table border='1'>
    <tr>
        <td class="title">
            <div>Editor:</div>
        </td>
        <td class="title">
            <div>
                <span>Simulator:</span>
                <select id="base-selector-dropbox">
                    <option value="2">Bin</option>
                    <option value="8">Oct</option>
                    <option value="10" selected="selected">Dec</option>
                    <option value="16">Hex</option>
                </select>
                Clock frequency (1Hz~1kHz):
                <input class="short-input" type="text" value="10" id="clock-frequency" /> Hz
            </div>
        </td>
    </tr>
    <tr>
        <td valign="top">
            <table>
                <tr>
                    <td valign="top">
                        <div class="sub-title">Assembly editor</div>
                        <div>
                            <textarea id="assembly-code-box">
# Putting data into the memory
.data 55 100
.data 54 -1

# Begining of the program

# Load the value from the address 55
lda 55

# Add the value from the address 54
:add_point
call :sum_subroutine

# Jump if zero
jz :sleep_point

# Jump
jmp :add_point

# Sleep
:sleep_point
hlt

# Sum subroutime
:sum_subroutine
add 54
ret

</textarea>
                        </div>
                        <div id="assembly-code-box-message"></div>
                        <button id="assemble-button">Assemble</button>
                        <span>(<a href="help.txt" target="_blank">ajuda</a>)</span>
                    </td>
                    <td valign="top">
                        <div class="sub-title">Assembled code</div>
                        <div>
                            <textarea id="assembled-code-box"></textarea>
                        </div>
                        <div id="assembled-code-box-message"></div>
                        <button id="load-assembled-button">Load into memory</button>
                    </td>
                </tr>
            </table>
        </td>
        <td valign="top">
            <table>
                <tr>
                    <td valign="top">
                        <div class="sub-title">CPU</div>
                          <div>
                            <table>
                                <tr>
                                    <td>AC: </td>
                                    <td><input class="short-input" type="text" value="0" id="ac-box" /></td>
                                </tr>
                                <tr>
                                    <td>PC: </td>
                                    <td><input class="short-input" type="text" value="0" id="pc-box" /></td>
                                </tr>
                                <tr>
                                    <td>Z: </td>
                                    <td><input class="short-input" type="text" value="0" id="z-box" /></td>
                                </tr>
                                <tr>
                                    <td>N: </td>
                                    <td><input class="short-input" type="text" value="0" id="n-box" /></td>
                                </tr>
                                <tr>
                                    <td>Memory access: </td>
                                    <td>
                                        R: <span id="memory-read-access" />0</span>
                                        W: <span id="memory-write-access" />0</span>
                                    </td>
                                </tr>
                            </table>
                            <button id="clock-tick-button">Clock tick</button>
                            <button id="reset-button">Reset</button>
                            <button id="sleep-button">Sleep</button>
                        </div>
                        <div>
                            <button id="power-button">Power on</button>
                        </div>
                    </td>
                    <td valign="top">
                        <div>
                            <div class="sub-title">Stack</div>
                            <div id="stack-grid-holder"></div>
                            <button id="erase-stack-button">Erase stack</button>
                        </div>
                    </td>
                    <td valign="top">
                        <div class="sub-title">Memory</div>
                        <div id="memory-grid-holder"></div>
                        <button id="erase-memory-button">Erase memory</button>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<div id="ext-glcd" style="position: absolute; left: 920px; top: 45px;"></div>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="lib/jquery-ui/css/custom/jquery-ui-1.10.3.custom.css">
<script src="jquery.js" type="text/javascript"></script>
<script src="lib/jquery-ui/js/jquery-ui-1.10.3.custom.js" type="text/javascript"></script>
<script src="converter.js" type="text/javascript"></script>
<script src="instructions.js" type="text/javascript"></script>
<script src="decoder.js" type="text/javascript"></script>
<script src="memory.js" type="text/javascript"></script>
<script src="stack.js" type="text/javascript"></script>
<script src="cpu.js" type="text/javascript"></script>
<script src="assembler.js" type="text/javascript"></script>
<script src="ext/mappedMemory.js" type="text/javascript"></script>
<script src="UI.js" type="text/javascript"></script>

<script type="text/javascript">
    
    var DEFAULT_BASE = 10;
    
    var assembler = new Assembler();
    var converter = new Converter(DEFAULT_BASE);
    
    var stack = new Stack(16);
    var memory = new Memory(256);
    var decoder = new Decoder();
    var cpu = new Cpu();
    
    memory.erase();
    stack.erase();
    
    cpu.setStack(stack);
    cpu.setMemory(memory);
    cpu.setDecoder(decoder);
    
    var ui = new UI(cpu);
    ui.init();


    $('#ext-glcd').load('ext/display/glcd/glcd.html');
    
</script>

<table>
    <tr>
        <td>-</td>
        <td>0</td>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>D</td>
        <td>E</td>
        <td>F</td>
    </tr>
    <tr>
        <td>0</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
        <td>0x00</td>
    </tr>
</table>

<div class="footer">Written by Dalmir da Silva &lt;dalmirdasilva@gmail.com&gt;</div>
