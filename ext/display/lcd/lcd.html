
<link rel="stylesheet" type="text/css" href="ext/display/lcd/lcd.css">
<script src="ext/display/lcd/lcd.js" type="text/javascript"></script>

<div id="lcd-box">
    <div id="lcd-title">Lcd <span id="lcd-text"></span></div>
    <div id="lcd-grid"></div>
    <div id="lcd-grid-footer"><button id="lcd-power-button">Power on</button></div>
</div>

<script type="text/javascript">
    
    function createGrid(width, height) {
        var grid = "<table border='0' cellspacing='1' cellpadding='0'>";
        for(var i = 0; i < height; i++) {
            grid += "<tr>";
            for (var j = 0; j < width; j++) {
                grid += "<td class='lcd-pixel-on lcd-cell' id='lcd-cell-"+j+"-"+i+"'></td>";
            }
            grid += "</tr>";
        }
        grid += "</table>";
        $("#lcd-grid").html(grid);
    }
    
    function writePixel(x, y, value) {
        var cell = $("#lcd-cell-"+x+"-"+y);
        cell.removeClass("lcd-pixel-on lcd-pixel-off");
        if(value != 0) {
            cell.addClass("lcd-pixel-on");
        } else {
            cell.addClass("lcd-pixel-off");
        }
    }
    
    var width = 16;
    var height = 16;
    var mapSize = (width * height) / 8;
    var graphicMamory = new MappedMemory(memory, memory.getSize() - mapSize, mapSize);
    var lcd = new Lcd(width, height, graphicMamory, 10, writePixel);
    createGrid(width, height);
    
    $("#lcd-text").html("("+width+"x"+height+")");    
    $("#lcd-power-button").click(function() {
        if (lcd.getPowered()) {
            lcd.stop();
            $(this).text("Power on");
        } else {
            lcd.init();
            $(this).text("Power off");
        }
    });
    
</script>
